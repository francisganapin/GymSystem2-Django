{% extends "base.html" %}

{% block title %}Classes{% endblock %}

{% block content %}

<style>
    .member-list {
        padding-right: 100px;
        margin-left: -160px; /* Shift left by 160px */
    }

    .overflow-auto {
        max-height: 600px; /* Limit height for scrolling */
        overflow-y: auto; /* Enable vertical scrolling */
        overflow-x: hidden; /* Disable horizontal scrolling if not needed */
    }

</style>

<form method="get" action="{%url 'member_views' %}"> <!--it wil go here after submition-->
                     
    <input class="input_id" type="text"  name='id_card' value="{{ request.GET.id_card }}" placeholder="ID" >




    <button type="submit" class="bg-sky-500 hover:bg-sky-700">Search</button>
</form>


<div class="member-list">
<div class="main-content p-8 bg-pink-50">
    <div class="overflow-auto max-h-400 border border-gray-400 rounded-md shadow-lg">

   

        <table class="table-auto border-collapse w-full text-left">
            <thead class="bg-gradient-to-r from-pink-200 to-pink-100 sticky top-0 shadow-sm">
                <tr>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">ID</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">ID CARD</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">Expiry</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">Name</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">Gender</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">Profile Image</th>
                    <th class="border border-gray-300 px-4 py-3 text-pink-900 font-semibold">Update</th>
                </tr>
            </thead>
            <tbody class="bg-white">
                {% for member in members %}
                <tr class="hover:bg-pink-50 transition-colors duration-200">
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">{{ member.id }}</td>
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">{{ member.id_card }}</td>
                    
                    <!--- expiry logic -->
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">
                    {% if member.expiry  < today_date%}
                    <span style="color:red"><strong>Expired</strong></span>
                    {% else %}
                    <span style="color:green"><strong>{{ member.expiry }}</strong></span>
                    {% endif %}

                    </td>
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">{{ member.first_name }} {{ member.last_name }}</td>
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">{{ member.gender }}</td>
                    <td class="border border-gray-300 px-4 py-2 text-center">
                        <img src="/media/{{ member.profile_image }}" alt="Profile"
                        class="h-12 w-12 rounded-full mx-auto border border-pink-200">
                    </td>
                    
                    <td class="border border-gray-300 px-4 py-2 text-gray-700">
                        <a href="{% url 'member_update_views' member.id %}" class="text-blue-600 hover:text-blue-800">
                            <img src="media/icon/edit.svg" alt="Edit" class="inline-block h-5 w-5">
                        </a>
                    </td>

                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
</div>
</div>


<!--we add this to have option to paginate data on our member 2/4/2025-->
<div class="flex justify-center items-center py-4">
    <div class="flex gap-2 bg-gray-100 p-3 rounded-lg shadow-md">
        {% if members.has_previous %}
            <a href="?page=1&id_card={{ request.GET.id_card }}" class="px-3 py-2 text-blue-600 font-semibold rounded-md transition duration-300 hover:bg-blue-600 hover:text-white">First</a>
            <a href="?page={{ members.previous_page_number }}" class="px-3 py-2 text-blue-600 font-semibold rounded-md transition duration-300 hover:bg-blue-600 hover:text-white">Previous</a>
        {% endif %}

        <span class="px-3 py-2 text-gray-700 font-semibold">
            Page {{ members.number }} of {{ members.paginator.num_pages }}
        </span>

        {% if members.has_next %}
            <a href="?page={{ members.next_page_number }}&id_card={{ request.GET.id_card }}" class="px-3 py-2 text-blue-600 font-semibold rounded-md transition duration-300 hover:bg-blue-600 hover:text-white">Next</a>
            <a href="?page={{ members.paginator.num_pages }}&id_card={{ request.GET.id_card }}" class="px-3 py-2 text-blue-600 font-semibold rounded-md transition duration-300 hover:bg-blue-600 hover:text-white">Last</a>
        {% endif %}
    </div>
</div>


{% endblock %}
